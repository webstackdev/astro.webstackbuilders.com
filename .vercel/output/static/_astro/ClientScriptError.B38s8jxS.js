function o(e){return typeof e=="string"||e instanceof String}function c(e){return typeof e=="object"&&e.name==="Error"}function a(e){let t=!1;return e&&typeof e=="object"&&(t=["colno","error","filename","lineno","message"].every(i=>i in e)),t}function m(e){return e&&typeof e=="object"?"reason"in e:!1}function l(e){return typeof e=="object"&&e.name==="ClientScriptError"}const u=e=>l(e)?v(e):c(e)?f(e):a(e)?N(e):m(e)?b(e):d(e),n=e=>{if(!o(e))return{fileName:void 0,lineNumber:void 0,columnNumber:void 0};const t=e.split(`
`);if(o(t[0])&&/^[a-zA-Z]*Error:/.test(t[0])&&t.shift(),o(t[0])&&/at new ClientScriptError/.test(t[0])&&t.shift(),!o(t[0]))throw new Error;const r=/\((.*):(\d+):(\d+)\)$/.exec(t.shift());return{fileName:r&&o(r[1])?r[1]:void 0,lineNumber:r&&o(r[2])?r[2]:void 0,columnNumber:r&&o(r[3])?r[3]:void 0}},f=e=>{const{fileName:t,lineNumber:r,columnNumber:i}=n(e.stack);return{message:e.message,stack:e?.stack?e.stack:void 0,cause:e,fileName:t,columnNumber:i,lineNumber:r}},v=e=>{const{fileName:t,lineNumber:r,columnNumber:i}=n(e.stack);return{message:e.message,stack:e?.stack?e.stack:void 0,cause:e,fileName:t,columnNumber:i,lineNumber:r}},N=e=>({message:e.message,stack:void 0,cause:e.error,fileName:e.filename??void 0,columnNumber:e.colno?String(e.colno):void 0,lineNumber:e.lineno?String(e.lineno):void 0}),b=e=>({message:e.reason,stack:void 0,cause:e.promise,fileName:void 0,columnNumber:void 0,lineNumber:void 0}),d=e=>({message:e?String(e):"",stack:void 0,cause:void 0,fileName:void 0,columnNumber:void 0,lineNumber:void 0});class s extends Error{fileName;columnNumber;lineNumber;constructor(t){const r=u(t);super(r.message),Object.defineProperty(this,"name",{value:"ClientScriptError",enumerable:!1,configurable:!0}),Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,s),"stackTraceLimit"in Error&&(Error.stackTraceLimit=1/0),this.message=r.message,this.cause=r.cause,this.fileName=r.fileName,this.columnNumber=r.columnNumber,this.lineNumber=r.lineNumber}toJSON(){return{error:{name:this.name,message:this.message,stack:this.stack}}}}export{s as C};
