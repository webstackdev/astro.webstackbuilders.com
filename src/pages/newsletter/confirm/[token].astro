---
/**
 * Newsletter Confirmation Page
 * Handles double opt-in confirmation link from email
 * GDPR-compliant newsletter subscription verification
 *
 * This page calls the API endpoint to process confirmation server-side
 */
import PageLayout from '@layouts/PageLayout.astro'
import NewsletterConfirmation from '@components/Newsletter/Confirm/index.astro'

// This is a server-rendered dynamic route
export const prerender = false

const pageTitle = 'Confirming Your Subscription...'
const pageDescription = 'Double opt-in confirmation for your Webstack Builders newsletter subscription.'

const { token } = Astro.params

if (typeof token !== 'string' || token.trim().length === 0) {
  throw new Response(null, { status: 404 })
}
---

<PageLayout
  pageTitle={pageTitle}
  pageDescription={pageDescription}
  path={"/newsletter/confirm"}
  icon="document"
>
  <NewsletterConfirmation token={token} />
</PageLayout>
