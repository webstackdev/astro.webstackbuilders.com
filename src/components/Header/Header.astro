---
import Brand from "@components/Brand/Brand.astro"
import Menu from "@components/Navigation/Menu.astro"
import NavToggle from "@components/Navigation/NavToggle.astro"
import Themes from "@components/ThemePicker/Themes.astro"
import ThemeButton from "@components/ThemePicker/ThemeButton.astro"

export interface Props {
  /** The URL path component e.g. 'articles/my-article' */
  path: string,
}

const { path } = Astro.props
---

<!-- CSS Custom Properties for Header Icons -->
<style>
  :root {
    --header-icon-size: calc(3.5em * 0.75);
    --header-icon-svg-size: calc(var(--header-icon-size) * 0.7);
    --circle-stroke: calc(var(--header-icon-size) * 2 * 3.141592653);
  }

  @media (min-width: 640px) {
    :root {
      --header-icon-size: calc(3.5em * 0.85);
    }
  }

  @media (min-width: 1024px) {
    :root {
      --header-icon-size: calc(3.5em);
    }
  }

  #header::after {
    content: "";
    display: block;
    position: absolute;
    left: 52%;
    top: 0;
    height: 100%;
    width: 102vw;
    transform: translateX(-52%);
    z-index: -1;
    box-sizing: border-box;
    background-color: var(--color-bg-offset);
  }

  #header.aria-expanded-true {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }

  #header.aria-expanded-true #header__main-nav {
    width: 100%;
  }

  #header.aria-expanded-true #header__brand {
    display: none;
  }

  #header.aria-expanded-true #header__theme-icon {
    display: none;
  }
</style>

{/* Hidden modal shown when theme picker icon selected */}
<Themes />
{/* Header for all pages */}
<header
  id="header"
  class="flex flex-row items-center justify-between py-2 lg:py-3 relative"
  role="banner"
>
  {/*- Element for animated background behind mobile navigation menu -*/}
  <div id="mobile-splash" class="mobile-splash"></div>
  {/* Logo and wordmark */}
  <span id="header__brand" class="flex items-center justify-between">
    <Brand />
  </span>
  {/* Main Navigation Menu */}
  <span id="header__main-nav" class="z-[calc(var(--z-nav)+1)]">
    <Menu path={path} />
  </span>
  {/* Theme picker toggle button to show modal */}
  <span
    id="header__theme-icon"
    class="w-[calc(var(--header-icon-size)*2+0.5em)] lg:w-[var(--header-icon-size)] lg:mr-4"
  >
    <ThemeButton />
  </span>
  {/* Mobile navigation toggle button to show menu on full-page splash screen */}
  <span
    id="header__nav-icon"
    class="inline-block absolute right-0 z-[calc(var(--z-nav)+1)] lg:hidden"
  >
    <NavToggle />
  </span>
</header>
