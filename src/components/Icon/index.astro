---
import { getIconComponent } from '@components/Icon/server'

export type Props = {
  /** The name of the icon file in the icons directory to display without its file extension. */
  icon: string
  /**
   * The name of a Tailwind theme color CSS variable without the `--theme-color-` prefix.
   * Example: 'primary', 'text-content', 'green-500'. Defaults to "inherit". Icon files
   * apply the value to their stroke and fill attributes as appropriate for the image.
   */
  color?: string
  /** A color for the icon to use for internal fill areas */
  inverseColor?: string
  /** Defaults to 24. */
  size?: number
  /** Any additional CSS classes to apply to the SVG element. */
  classes?: string
  /**
   * Whether the icon has a <title> element and aria-hidden=false attribute (if true),
   * or aria-hidden=true without a <title> (if false). Defaults to false.
   */
  accessible?: boolean
  /** Whether the icon can receive focus. Defaults to false. */
  focusable?: boolean
  /** Whether the icon is used as a list marker. If true, applies a "mt-0.5" class. Defaults to true. */
  isListMarker?: boolean
}

const { icon, color = 'inherit', inverseColor, size = 14, classes, accessible = false, focusable = false, isListMarker = true }: Props = Astro.props

const IconComponent = getIconComponent(icon) as unknown as (_props: {
  color?: string
  inverseColor?: string
  size?: number
  classes?: string
  accessible?: boolean
  focusable?: boolean
  isListMarker?: boolean
}) => unknown

const markerProps = {
  ...(color ? { color } : {}),
  ...(inverseColor ? { inverseColor } : {}),
  ...(size !== undefined ? { size } : {}),
  ...(classes ? { classes } : {}),
  ...(accessible ? { accessible } : {}),
  ...(focusable ? { focusable } : {}),
  ...(isListMarker ? { isListMarker } : {}),
}
---

<IconComponent {...markerProps} />
