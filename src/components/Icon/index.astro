---
/**
 * Icon component using astro-icon. SVG files are in `src/icons/` directory.
 * Refactored to use Tailwind classes instead of CSS classes.
 */
import { Icon } from 'astro-icon/components'
import { colorClasses, type IconVariant } from './constants'

export { colorClasses, type IconVariant } from './constants'

export interface Props {
  class?: string
  name: string
  size?: number | string
  /** Color variant for the icon */
  variant?: IconVariant
  /** Optional accessible title for the rendered SVG */
  title?: string
}

const { class: className, name, size = 24, variant = 'default' as IconVariant, title } = Astro.props

function normalizeIconSize(value: number | string): string {
  if (typeof value === 'number') return `${value}px`

  const trimmed = String(value).trim()
  if (/^\d+(?:\.\d+)?$/.test(trimmed)) return `${trimmed}px`

  return trimmed
}

const iconSize = normalizeIconSize(size)

const a11yProps = title
  ? { title, 'aria-label': title }
  : { 'aria-hidden': 'true' as const }
---

<Icon
  name={name}
  class:list={['inline-block align-middle', colorClasses[variant], `icon--${name}`, className]}
  size={size}
  style={`--icon-size: ${iconSize};`}
  {...a11yProps}
  focusable="false"
/>
