---
/**
 * Icon component using astro-icon. SVG files are in `src/icons/` directory.
 * Refactored to use Tailwind classes instead of CSS classes.
 */
import { Icon } from 'astro-icon/components'
import { colorClasses, type IconVariant } from './constants'

export { colorClasses, type IconVariant } from './constants'

export interface Props {
  class?: string
  name: string
  size?: number | string
  /** Color variant for the icon */
  variant?: IconVariant
}

const { class: className, name, size = 24, variant = 'default' as IconVariant } = Astro.props
const iconTitle = formatIconTitle(name)

function formatIconTitle(value: string): string {
  const normalizedValue = value
    .replace(/[-_]+/g, ' ')
    .replace(/\s+/g, ' ')
    .trim()

  if (!normalizedValue.length) {
    return 'Icon'
  }

  const formattedValue = normalizedValue
    .split(' ')
    .map(segment => segment.charAt(0).toUpperCase() + segment.slice(1))
    .join(' ')

  return `${formattedValue} icon`
}
---

<Icon
  name={name}
  class:list={['inline-block align-middle', colorClasses[variant], `icon--${name}`, className]}
  size={size}
  title={iconTitle}
  aria-hidden="true"
/>
