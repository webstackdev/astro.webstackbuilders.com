---
/**
 * Highlighter Component
 *
 * Creates a shareable text highlight with a hover dialog showing social share options.
 * Users can share selected text to X, LinkedIn, Bluesky, Reddit, or copy a link.
 *
 * @example MDX Usage
 * ```mdx
 * import { Highlighter } from '@components/Social/Highlighter'
 *
 * This is <Highlighter>shareable text</Highlighter> that shows share options on hover.
 * ```
 *
 * @example With Custom Label
 * ```mdx
 * <Highlighter ariaLabel="Share this insight">important insight</Highlighter>
 * ```
 */
import Icon from '@components/Icon/index.astro'
import './index.css'

export interface Props {
  /**
   * Custom aria-label for accessibility
   * @default 'Share this'
   */
  ariaLabel?: string

  /**
   * Additional CSS classes
   */
  class?: string
}

const { ariaLabel, class: className } = Astro.props
const iconBankId = 'highlighter-icon-bank'
---

<div id={iconBankId} hidden aria-hidden="true">
  <span data-highlighter-icon="x"><Icon icon="x" size={5} color="inherit" classes="share-icon" isListMarker={false} /></span>
  <span data-highlighter-icon="linkedin"><Icon icon="linkedin" size={5} color="inherit" classes="share-icon" isListMarker={false} /></span>
  <span data-highlighter-icon="bluesky"><Icon icon="bluesky" size={5} color="inherit" classes="share-icon" isListMarker={false} /></span>
  <span data-highlighter-icon="reddit"><Icon icon="reddit" size={5} color="inherit" classes="share-icon" isListMarker={false} /></span>
  <span data-highlighter-icon="mastodon"><Icon icon="mastodon" size={5} color="inherit" classes="share-icon" isListMarker={false} /></span>
</div>

<highlighter-element aria-label={ariaLabel}>
  <span class:list={['bg-spotlight', 'rounded', 'px-1', 'py-0.5', className]}>
    <slot />
  </span>
</highlighter-element>

<script>
  import { registerHighlighterWebComponent } from '@components/Social/Highlighter/client'
  registerHighlighterWebComponent()
</script>
