---
/**
 * Social media sharing component powered by Lit web component
 */

import Icon from '@components/Icon/index.astro'

export interface Props {
  /** Page URL to share */
  url: string
  /** Page title to share */
  title: string
  /** Page description to share */
  description?: string
  /** Social image URL */
  image?: string
  /** Additional CSS classes */
  class?: string
  /** Show as horizontal or vertical layout */
  layout?: 'horizontal' | 'vertical'
  /** Which social networks to show */
  socialNetworks?: ('x' | 'linkedin' | 'bluesky' | 'reddit' | 'mastodon')[]
}

const {
  url,
  title,
  description = '',
  class: additionalClasses = '',
  layout = 'horizontal',
  socialNetworks = ['x', 'linkedin', 'bluesky', 'reddit', 'mastodon'],
} = Astro.props

// Create share data
const shareDescription = description ?? ''
const containerClassAttr = additionalClasses ?? ''
const socialNetworksAttr = socialNetworks.join(',')

const iconBankId = `social-share-icon-bank-${Math.random().toString(36).slice(2)}`
---

<div id={iconBankId} hidden aria-hidden="true">
  <span data-social-share-icon="x"><Icon icon="x" size={24} color="inherit" /></span>
  <span data-social-share-icon="linkedin"><Icon icon="linkedin" size={24} color="inherit" /></span>
  <span data-social-share-icon="bluesky"><Icon icon="bluesky" size={24} color="inherit" /></span>
  <span data-social-share-icon="reddit"><Icon icon="reddit" size={24} color="inherit" /></span>
  <span data-social-share-icon="mastodon"><Icon icon="mastodon" size={24} color="inherit" /></span>
</div>

<social-share-element
  data-social-shares
  url={url}
  title={title}
  description={shareDescription}
  layout={layout}
  social-networks={socialNetworksAttr}
  container-class={containerClassAttr}
  icon-bank-id={iconBankId}
  label-text="Share:"
>
</social-share-element>

<script>
  import { registerSocialShareWebComponent } from '@components/Social/Shares/client'
  registerSocialShareWebComponent()
</script>
