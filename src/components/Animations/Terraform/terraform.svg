<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 600 600"
  preserveAspectRatio="xMidYMid meet"
>
  <defs>
    <!-- Green checkmark glow -->
    <filter id="tf-check-glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur" />
      <feMerge>
        <feMergeNode in="blur" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
  </defs>

  <!-- ===== TERMINAL FRAME ===== -->
  <g id="tf-frame">
    <!-- Outer terminal window -->
    <rect id="tf-frame-rect" x="40" y="40" width="520" height="520" rx="10" fill="#001A39" stroke="#003d86" stroke-width="2" />

    <!-- Title bar -->
    <rect x="40" y="40" width="520" height="32" rx="10" fill="#003d86" />
    <rect x="40" y="60" width="520" height="12" fill="#003d86" />

    <!-- Traffic light dots -->
    <circle cx="62" cy="56" r="5" fill="#dc2626" opacity="0.7" />
    <circle cx="78" cy="56" r="5" fill="#facc15" opacity="0.7" />
    <circle cx="94" cy="56" r="5" fill="#16a34a" opacity="0.7" />

    <!-- Terminal title -->
    <text x="300" y="61" fill="#f3f4f6" font-family="monospace" font-size="11" text-anchor="middle" opacity="0.6">terraform — plan &amp; apply</text>
  </g>

  <!--
    Graph layout (two-tier dependency graph):
      Root "main.tf" at (300, 120)
      Row 1 — foundational: VPC (150, 210), IAM (300, 210), S3 (450, 210)
      Row 2 — dependent:    EKS (210, 310), RDS (390, 310)
    Node size: 96 × 48 (rx 6)
  -->

  <!-- ===== ROOT NODE: main.tf ===== -->
  <g id="tf-node-root" transform="translate(300,120)">
    <rect x="-52" y="-18" width="104" height="36" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- File icon -->
    <rect x="-40" y="-10" width="14" height="16" rx="1" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <polyline points="-32,-10 -32,-6 -26,-6" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <!-- Typed text (for GSAP character-by-character) -->
    <text id="tf-root-text" x="-18" y="5" fill="#f3f4f6" font-family="monospace" font-size="13" font-weight="bold">main.tf</text>
    <!-- Checkmark (hidden) -->
    <g id="tf-check-root" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="60" cy="0" r="8" fill="#16a34a" />
      <polyline points="55,0 58,4 65,-4" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
  </g>

  <!-- ===== PRIMARY EDGES (root → row 1 children) ===== -->
  <g id="tf-edges-primary" fill="none" stroke="#9ca3af" stroke-width="1.5">
    <!-- root (300,138) → VPC (150,186) -->
    <path id="tf-edge-vpc" d="M270,138 C270,162 150,162 150,186" />
    <polygon id="tf-arrow-vpc" points="150,186 146,178 154,178" fill="#9ca3af" />

    <!-- root (300,138) → IAM (300,186) -->
    <path id="tf-edge-iam" d="M300,138 C300,158 300,166 300,186" />
    <polygon id="tf-arrow-iam" points="300,186 296,178 304,178" fill="#9ca3af" />

    <!-- root (300,138) → S3 (450,186) -->
    <path id="tf-edge-s3" d="M330,138 C330,162 450,162 450,186" />
    <polygon id="tf-arrow-s3" points="450,186 446,178 454,178" fill="#9ca3af" />
  </g>

  <!-- ===== CROSS-DEPENDENCY EDGES (row 1 → row 2, thinner + dashed) ===== -->
  <g id="tf-edges-cross" fill="none" stroke="#9ca3af" stroke-width="1" stroke-dasharray="6 3">
    <!-- VPC (150,234) → EKS (210,286) — EKS needs VPC subnets -->
    <path id="tf-edge-vpc-eks" d="M150,234 C150,260 210,260 210,286" />
    <polygon id="tf-arrow-vpc-eks" points="210,286 207,279 213,279" fill="#9ca3af" />

    <!-- IAM (300,234) → EKS (210,286) — EKS needs IAM roles -->
    <path id="tf-edge-iam-eks" d="M300,234 C300,260 210,264 210,286" />
    <polygon id="tf-arrow-iam-eks" points="210,286 207,279 213,279" fill="#9ca3af" />

    <!-- VPC (150,234) → RDS (390,286) — RDS needs VPC subnets -->
    <path id="tf-edge-vpc-rds" d="M175,234 C175,268 370,260 390,286" />
    <polygon id="tf-arrow-vpc-rds" points="390,286 387,279 393,279" fill="#9ca3af" />

    <!-- IAM (300,234) → RDS (390,286) — RDS needs IAM -->
    <path id="tf-edge-iam-rds" d="M320,234 C320,260 390,264 390,286" />
    <polygon id="tf-arrow-iam-rds" points="390,286 387,279 393,279" fill="#9ca3af" />
  </g>

  <!-- ===== ROW 1 CHILD NODE 1: VPC (network grid) ===== -->
  <g id="tf-node-vpc" transform="translate(150,210)">
    <rect x="-48" y="-24" width="96" height="48" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- Network grid icon -->
    <line x1="-28" y1="-8" x2="-6" y2="-8" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <line x1="-28" y1="0" x2="-6" y2="0" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <line x1="-28" y1="8" x2="-6" y2="8" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <line x1="-22" y1="-14" x2="-22" y2="14" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <line x1="-16" y1="-14" x2="-16" y2="14" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <line x1="-10" y1="-14" x2="-10" y2="14" stroke="#f3f4f6" stroke-width="1" opacity="0.5" />
    <text x="16" y="4" fill="#f3f4f6" font-family="monospace" font-size="11">VPC</text>
    <!-- Checkmark (hidden) -->
    <g id="tf-check-vpc" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="54" cy="-14" r="8" fill="#16a34a" />
      <polyline points="49,-14 52,-10 59,-18" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <!-- Flash border overlay -->
    <rect id="tf-flash-vpc" x="-48" y="-24" width="96" height="48" rx="6" fill="none" stroke="#16a34a" stroke-width="2.5" opacity="0" />
  </g>

  <!-- ===== ROW 1 CHILD NODE 2: IAM (shield) ===== -->
  <g id="tf-node-iam" transform="translate(300,210)">
    <rect x="-48" y="-24" width="96" height="48" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- Shield icon -->
    <path d="M-18,-14 L-28,-7 L-28,2 C-28,10 -18,16 -18,16 C-18,16 -8,10 -8,2 L-8,-7z"
          fill="none" stroke="#f3f4f6" stroke-width="1.3" stroke-linejoin="round" />
    <polyline points="-22,0 -18,4 -12,-4" fill="none" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
    <text x="12" y="4" fill="#f3f4f6" font-family="monospace" font-size="11">IAM</text>
    <g id="tf-check-iam" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="54" cy="-14" r="8" fill="#16a34a" />
      <polyline points="49,-14 52,-10 59,-18" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <rect id="tf-flash-iam" x="-48" y="-24" width="96" height="48" rx="6" fill="none" stroke="#16a34a" stroke-width="2.5" opacity="0" />
  </g>

  <!-- ===== ROW 1 CHILD NODE 3: S3 (bucket) ===== -->
  <g id="tf-node-s3" transform="translate(450,210)">
    <rect x="-48" y="-24" width="96" height="48" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- Bucket icon -->
    <path d="M-28,-10 L-24,10 L-8,10 L-4,-10z" fill="none" stroke="#f3f4f6" stroke-width="1.3" stroke-linejoin="round" />
    <ellipse cx="-16" cy="-10" rx="12" ry="4" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <path d="M-27,0 Q-16,4 -5,0" fill="none" stroke="#f3f4f6" stroke-width="0.8" opacity="0.5" />
    <text x="16" y="4" fill="#f3f4f6" font-family="monospace" font-size="11">S3</text>
    <g id="tf-check-s3" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="54" cy="-14" r="8" fill="#16a34a" />
      <polyline points="49,-14 52,-10 59,-18" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <rect id="tf-flash-s3" x="-48" y="-24" width="96" height="48" rx="6" fill="none" stroke="#16a34a" stroke-width="2.5" opacity="0" />
  </g>

  <!-- ===== ROW 2 CHILD NODE 4: EKS (K8s wheel) ===== -->
  <g id="tf-node-eks" transform="translate(210,310)">
    <rect x="-48" y="-24" width="96" height="48" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- K8s helm wheel (small) -->
    <circle cx="-18" cy="0" r="6" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <circle cx="-18" cy="0" r="2.5" fill="#f3f4f6" opacity="0.5" />
    <line x1="-18" y1="-6" x2="-18" y2="-12" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <line x1="-12.8" y1="-3" x2="-9" y2="-5.2" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <line x1="-12.8" y1="3" x2="-9" y2="5.2" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <line x1="-18" y1="6" x2="-18" y2="12" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <line x1="-23.2" y1="3" x2="-27" y2="5.2" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <line x1="-23.2" y1="-3" x2="-27" y2="-5.2" stroke="#f3f4f6" stroke-width="1.2" stroke-linecap="round" />
    <text x="8" y="4" fill="#f3f4f6" font-family="monospace" font-size="11">EKS</text>
    <g id="tf-check-eks" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="54" cy="-14" r="8" fill="#16a34a" />
      <polyline points="49,-14 52,-10 59,-18" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <rect id="tf-flash-eks" x="-48" y="-24" width="96" height="48" rx="6" fill="none" stroke="#16a34a" stroke-width="2.5" opacity="0" />
  </g>

  <!-- ===== ROW 2 CHILD NODE 5: RDS (database cylinder) ===== -->
  <g id="tf-node-rds" transform="translate(390,310)">
    <rect x="-48" y="-24" width="96" height="48" rx="6" fill="#003d86" stroke="#9ca3af" stroke-width="1.5" />
    <!-- Database cylinder -->
    <ellipse cx="-18" cy="-8" rx="10" ry="5" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <line x1="-28" y1="-8" x2="-28" y2="8" stroke="#f3f4f6" stroke-width="1.2" />
    <line x1="-8" y1="-8" x2="-8" y2="8" stroke="#f3f4f6" stroke-width="1.2" />
    <ellipse cx="-18" cy="8" rx="10" ry="5" fill="none" stroke="#f3f4f6" stroke-width="1.2" />
    <path d="M-28,0 Q-18,4 -8,0" fill="none" stroke="#f3f4f6" stroke-width="0.8" opacity="0.5" />
    <text x="10" y="4" fill="#f3f4f6" font-family="monospace" font-size="11">RDS</text>
    <g id="tf-check-rds" opacity="0" filter="url(#tf-check-glow)">
      <circle cx="54" cy="-14" r="8" fill="#16a34a" />
      <polyline points="49,-14 52,-10 59,-18" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <rect id="tf-flash-rds" x="-48" y="-24" width="96" height="48" rx="6" fill="none" stroke="#16a34a" stroke-width="2.5" opacity="0" />
  </g>

  <!-- ===== TERMINAL OUTPUT AREA (below graph) ===== -->
  <g id="tf-terminal" transform="translate(70,370)">
    <!-- Full-width separator spanning the terminal frame edges (frame x=40..560) -->
    <line id="tf-separator" x1="-30" y1="-8" x2="490" y2="-8" stroke="#003d86" stroke-width="1" />

    <!-- Prompt lines (for GSAP typewriter animation) -->
    <g id="tf-term-line-1" opacity="0">
      <text x="0" y="8" fill="#16a34a" font-family="monospace" font-size="10">$</text>
      <text x="12" y="8" fill="#f3f4f6" font-family="monospace" font-size="10">terraform init</text>
    </g>
    <g id="tf-term-line-2" opacity="0">
      <text x="0" y="24" fill="#9ca3af" font-family="monospace" font-size="9">Initializing provider plugins...</text>
    </g>
    <g id="tf-term-line-3" opacity="0">
      <text x="0" y="42" fill="#16a34a" font-family="monospace" font-size="10">$</text>
      <text x="12" y="42" fill="#f3f4f6" font-family="monospace" font-size="10">terraform plan</text>
    </g>
    <g id="tf-term-line-4" opacity="0">
      <text x="0" y="58" fill="#9ca3af" font-family="monospace" font-size="9">Plan: 5 to add, 0 to change, 0 to destroy.</text>
    </g>
    <g id="tf-term-line-5" opacity="0">
      <text x="0" y="76" fill="#16a34a" font-family="monospace" font-size="10">$</text>
      <text x="12" y="76" fill="#f3f4f6" font-family="monospace" font-size="10">terraform apply -auto-approve</text>
    </g>
    <g id="tf-term-line-6" opacity="0">
      <text x="0" y="92" fill="#9ca3af" font-family="monospace" font-size="9">aws_vpc.main: Creating...</text>
    </g>
    <g id="tf-term-line-7" opacity="0">
      <text x="0" y="106" fill="#9ca3af" font-family="monospace" font-size="9">aws_eks_cluster.platform: Creating...</text>
    </g>
    <g id="tf-term-line-8" opacity="0">
      <text x="0" y="120" fill="#9ca3af" font-family="monospace" font-size="9">aws_db_instance.primary: Creating...</text>
    </g>

    <!-- Final "Apply complete" line -->
    <g id="tf-term-complete" opacity="0">
      <text x="0" y="146" fill="#16a34a" font-family="monospace" font-size="11" font-weight="bold">Apply complete! Resources: 5 added, 0 changed, 0 destroyed.</text>
    </g>

    <!-- Blinking cursor -->
    <rect id="tf-cursor" x="0" y="154" width="7" height="11" rx="1" fill="#16a34a" opacity="0" />
  </g>
</svg>
