---
/**
 * Scripts component - Contains all site scripts and error handlers
 */
---

<script>
  import { registerScript } from '@components/Scripts/loader'
  import { AppBootstrap } from '@components/Scripts/bootstrap/client'

  {/* Initialize error handlers */}
  {/* Production: Sentry handles errors with replay, breadcrumbs, and remote tracking */}
  {/* Development: Custom handlers log errors to console for debugging */}
  const isProd = import.meta.env.PROD

  if (isProd) {
    await import('./sentry/client')
  } else {
    // Development: Use custom error handlers with console logging
    const { addErrorEventListeners } = await import('./errors/errorListeners')
    addErrorEventListeners()
  }

  // Initialize AppBootstrap FIRST - initializes state management
  // MUST run before any scripts that depend on state
  registerScript(AppBootstrap)
</script>
