---
/**
 * GDPR Consent Component Default Layout
 */

import type { ConsentCheckboxProps } from '@components/Consent/Checkbox/@types'

export type Props = Omit<ConsentCheckboxProps, 'variant'>

const {
  purpose,
  privacyPolicyUrl,
  cookiePolicyUrl,
  name,
  id,
  formId,
} = Astro.props
---

<div
  id={`${id}-container`}
  data-component="gdpr-consent"
  data-purpose={purpose}
  data-form-id={formId}
>
  <label class="flex items-start gap-2 cursor-pointer">
    <span class="text-page-base/50 text-sm">[</span>
    <input
      type="checkbox"
      name={name}
      id={id}
      value="true"
      aria-labelledby={`${id}-label`}
      aria-describedby={`${id}-description`}
      aria-invalid="false"
      class="relative rounded h-4 w-4 shrink-0 bg-transparent border-2 border-page-base/30 hover:border-spotlight hover:bg-spotlight/10 focus-visible:outline-none after:pointer-events-none after:absolute after:content-[''] after:inset-0 after:rounded-none after:border-2 after:border-transparent focus-visible:after:-inset-1 focus-visible:after:border-spotlight"
    />
    <span class="text-page-base/50 text-sm">]</span>
    <span id={`${id}-label`} class="sr-only">Consent to data processing</span>
    <span id={`${id}-description`} class="text-[10px] text-content-offset leading-tight">
      <span class="text-xs text-page-base/60 leading-relaxed">
        --consent "I agree to data processing"
        --<a
          href={privacyPolicyUrl}
          class="relative text-page-base/60 underline decoration-dotted decoration-current hover:text-(--color-page-base) transition-colors focus-visible:outline-none after:pointer-events-none after:absolute after:content-[''] after:inset-0 after:rounded-none after:border-2 after:border-transparent focus-visible:after:-inset-1 focus-visible:after:border-spotlight"
        >privacy</a>
        --<a
          href={cookiePolicyUrl}
          class="relative text-page-base/60 underline decoration-dotted decoration-current hover:text-(--color-page-base) transition-colors focus-visible:outline-none after:pointer-events-none after:absolute after:content-[''] after:inset-0 after:rounded-none after:border-2 after:border-transparent focus-visible:after:-inset-1 focus-visible:after:border-spotlight"
        >cookies</a>
      </span>
    </span>
  </label>

  <div
    class="bg-danger-offset text-danger text-sm rounded mt-2 p-2 hidden"
    id={`${id}-error`}
    role="alert"
    aria-live="assertive"
  >
  </div>

  <input
    type="hidden"
    name={name}
    value="true"
    id={`${id}-hidden`}
    data-consent-hidden="true"
    disabled
  />

  <input
    type="hidden"
    name="DataSubjectId"
    value=""
    id={`${id}-data-subject-id`}
    data-consent-data-subject-id="true"
    disabled
  />
</div>
