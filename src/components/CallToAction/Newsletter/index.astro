---
/**
 * Newsletter Call-to-Action Component
 *
 * A ConvertKit newsletter subscription form with client-side validation,
 * GDPR compliance, and double opt-in confirmation.
 *
 * @example
 * ```astro
 * <Newsletter />
 * <Newsletter
 *   title="Join Our Community"
 *   description="Get weekly insights on web development, design, and digital strategy."
 * />
 * ```
 */

import type { NewsletterProps } from './client/@types'
import ArticleNewsletter from './layouts/article.astro'
import HomeNewsletter from './layouts/home.astro'
import PageNewsletter from './layouts/page.astro'

export type Props = NewsletterProps

const {
  title = 'Stay Updated',
  description = 'Subscribe to our newsletter for the latest insights on web development and digital solutions.',
  placeholder = 'Enter your email address',
  buttonText = 'Subscribe',
  variant = 'article',
} = Astro.props
---

<newsletter-form class="cta block">
  {variant === 'article' && (
    <ArticleNewsletter
      title={title}
      description={description}
      placeholder={placeholder}
      buttonText={buttonText}
    />
  )}
  {variant === 'home' && (
    <HomeNewsletter
      title={title}
      description={description}
      placeholder={placeholder}
      buttonText={buttonText}
    />
  )}
  {variant === 'page' && (
    <PageNewsletter
      title={title}
      description={description}
      placeholder={placeholder}
      buttonText={buttonText}
    />
  )}
</newsletter-form>

<script>
  import { registerNewsletterFormWebComponent } from '@components/CallToAction/Newsletter/client'
  registerNewsletterFormWebComponent()
</script>
