---
// ContactForm.astro - Reusable contact form component
---

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 items-start">
  <!-- Contact Form -->
  <div class="lg:col-span-2 bg-[var(--color-bg)] p-6 md:p-8 rounded-2xl shadow-lg">
    <div class="mb-8">
      <h2 class="text-2xl md:text-3xl font-semibold text-[var(--color-text)] mb-3">
        Tell us about your project
      </h2>
      <p class="text-[var(--color-text-offset)] text-lg">
        We'll get back to you within 24 hours with a detailed proposal.
      </p>
    </div>

    <form class="space-y-8" id="contactForm" method="post" enctype="multipart/form-data">
      <!-- Personal Information -->
      <div class="pb-6 border-b border-[var(--color-border)]">
        <h3 class="flex items-center text-xl font-semibold text-[var(--color-text)] mb-6">
          <div class="w-1 h-5 bg-[var(--color-primary)] rounded-full mr-3"></div>
          Contact Information
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-2">
            <label for="name" class="block text-sm font-medium text-[var(--color-text-offset)]"
              >Full Name *</label
            >
            <input
              type="text"
              id="name"
              name="name"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200"
              required
              placeholder="Your full name"
              minlength="2"
              maxlength="100"
            />
          </div>

          <div class="space-y-2">
            <label for="email" class="block text-sm font-medium text-[var(--color-text-offset)]"
              >Email Address *</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200"
              required
              placeholder="your.email@example.com"
            />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-2">
            <label for="company" class="block text-sm font-medium text-[var(--color-text-offset)]"
              >Company Name</label
            >
            <input
              type="text"
              id="company"
              name="company"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200"
              placeholder="Your company name"
              maxlength="100"
            />
          </div>

          <div class="space-y-2">
            <label for="phone" class="block text-sm font-medium text-[var(--color-text-offset)]"
              >Phone Number</label
            >
            <input
              type="tel"
              id="phone"
              name="phone"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200"
              placeholder="+1 (555) 123-4567"
            />
          </div>
        </div>
      </div>

      <!-- Project Information -->
      <div class="pb-6 border-b border-[var(--color-border)]">
        <h3 class="flex items-center text-xl font-semibold text-[var(--color-text)] mb-6">
          <div class="w-1 h-5 bg-[var(--color-primary)] rounded-full mr-3"></div>
          Project Details
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-2">
            <label
              for="project_type"
              class="block text-sm font-medium text-[var(--color-text-offset)]">Project Type</label
            >
            <select
              id="project_type"
              name="project_type"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200 cursor-pointer"
            >
              <option value="">Select project type</option>
              <option value="website">New Website</option>
              <option value="redesign">Website Redesign</option>
              <option value="ecommerce">E-commerce Store</option>
              <option value="webapp">Web Application</option>
              <option value="mobile">Mobile App</option>
              <option value="api">API Development</option>
              <option value="consulting">Consulting</option>
              <option value="maintenance">Maintenance & Support</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="space-y-2">
            <label for="budget" class="block text-sm font-medium text-[var(--color-text-offset)]"
              >Budget Range</label
            >
            <select
              id="budget"
              name="budget"
              class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200 cursor-pointer"
            >
              <option value="">Select budget range</option>
              <option value="under-5k">Under $5,000</option>
              <option value="5k-10k">$5,000 - $10,000</option>
              <option value="10k-25k">$10,000 - $25,000</option>
              <option value="25k-50k">$25,000 - $50,000</option>
              <option value="50k-100k">$50,000 - $100,000</option>
              <option value="over-100k">$100,000+</option>
              <option value="discuss">Let's discuss</option>
            </select>
          </div>
        </div>

        <div class="space-y-2">
          <label for="timeline" class="block text-sm font-medium text-[var(--color-text-offset)]"
            >Timeline</label
          >
          <select
            id="timeline"
            name="timeline"
            class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200 cursor-pointer"
          >
            <option value="">Select timeline</option>
            <option value="asap">ASAP</option>
            <option value="1-month">Within 1 month</option>
            <option value="2-3-months">2-3 months</option>
            <option value="3-6-months">3-6 months</option>
            <option value="6-months-plus">6+ months</option>
            <option value="flexible">Flexible</option>
          </select>
        </div>

        <div class="space-y-2">
          <label for="message" class="block text-sm font-medium text-[var(--color-text-offset)]"
            >Project Description *</label
          >
          <textarea
            id="message"
            name="message"
            class="w-full px-4 py-3 border-2 border-[var(--color-border)] rounded-xl bg-[var(--color-bg)] text-[var(--color-text)] focus:border-[var(--color-primary)] focus:ring-0 focus:outline-none transition-colors duration-200 resize-vertical min-h-[120px]"
            rows="6"
            required
            placeholder="Describe your project, goals, target audience, and any specific requirements..."
            minlength="10"
            maxlength="2000"></textarea>
          <div class="text-right text-sm text-[var(--color-text-offset)]">
            <span id="charCount">0</span>/2000 characters
          </div>
        </div>
      </div>

      <!-- File Upload Section -->
      <div class="pb-6">
        <h3 class="flex items-center text-xl font-semibold text-[var(--color-text)] mb-4">
          <div class="w-1 h-5 bg-[var(--color-primary)] rounded-full mr-3"></div>
          Project Files (Optional)
        </h3>
        <p class="text-[var(--color-text-offset)] text-sm mb-6">
          Upload any relevant files like mockups, specifications, existing designs, or reference
          materials.
        </p>

        <div
          class="border-2 border-dashed border-[var(--color-border)] rounded-xl p-8 text-center bg-[var(--color-bg-offset)] hover:border-[var(--color-primary-hover)] transition-colors duration-200"
        >
          <div id="uppyContainer"></div>
          <div class="mt-4 space-y-2">
            <p class="text-sm text-[var(--color-text-offset)]">
              <strong>Supported formats:</strong> PDF, DOC, DOCX, JPG, PNG, GIF, WebP, MP3, WAV, MP4,
              MOV, ZIP, TXT
            </p>
            <p class="text-sm text-[var(--color-text-offset)]">
              <strong>Max file size:</strong> 10MB per file â€¢ <strong>Max files:</strong> 5
            </p>
          </div>
        </div>
      </div>

      <div class="flex justify-end">
        <button
          type="submit"
          class="inline-flex items-center justify-center px-8 py-4 bg-[var(--color-primary)] hover:bg-[var(--color-primary-hover)] text-white font-semibold rounded-xl transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none min-w-[200px]"
          id="submitBtn"
        >
          <span class="btn-text">Send Project Details</span>
          <span class="btn-loading hidden">
            <svg class="animate-spin w-5 h-5 mr-2" viewBox="0 0 24 24">
              <circle
                cx="12"
                cy="12"
                r="10"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                opacity="0.3"></circle>
              <path d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" fill="currentColor"></path>
            </svg>
            Sending...
          </span>
        </button>
      </div>
    </form>

    <!-- Form Messages -->
    <div id="formMessages" class="mt-8 rounded-xl overflow-hidden" style="display: none;">
      <div class="message-success hidden">
        <div
          class="flex items-start p-6 bg-[var(--color-success-bg)] border border-[var(--color-success)] gap-4"
        >
          <div
            class="flex-shrink-0 w-6 h-6 bg-[var(--color-success)] text-white rounded-full flex items-center justify-center text-sm font-bold"
          >
            âœ“
          </div>
          <div>
            <h3 class="text-lg font-semibold text-[var(--color-success)] mb-2">Thank you!</h3>
            <p class="text-[var(--color-text)]">
              Your project details have been sent successfully. We'll review everything and get back
              to you within 24 hours with a detailed proposal.
            </p>
          </div>
        </div>
      </div>
      <div class="message-error hidden">
        <div
          class="flex items-start p-6 bg-[var(--color-danger-bg)] border border-[var(--color-danger)] gap-4"
        >
          <div
            class="flex-shrink-0 w-6 h-6 bg-[var(--color-danger)] text-white rounded-full flex items-center justify-center text-sm font-bold"
          >
            âš 
          </div>
          <div>
            <h3 class="text-lg font-semibold text-[var(--color-danger)] mb-2">Oops!</h3>
            <p class="text-[var(--color-text)]" id="errorMessage">
              Something went wrong. Please try again later.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Information -->
  <div class="bg-[var(--color-bg)] p-6 md:p-8 rounded-2xl shadow-lg h-fit sticky top-8">
    <div class="space-y-8">
      <div>
        <h3 class="text-xl font-semibold text-[var(--color-text)] mb-6">Get In Touch</h3>

        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <div
              class="flex-shrink-0 w-11 h-11 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl flex items-center justify-center"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                ></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-[var(--color-text)] mb-1">Email</h4>
              <p class="text-[var(--color-text-offset)]">kevin@webstackbuilders.com</p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div
              class="flex-shrink-0 w-11 h-11 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl flex items-center justify-center"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-[var(--color-text)] mb-1">Location</h4>
              <p class="text-[var(--color-text-offset)]">Remote â€¢ Worldwide</p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div
              class="flex-shrink-0 w-11 h-11 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl flex items-center justify-center"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12,6 12,12 16,14"></polyline>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-[var(--color-text)] mb-1">Response Time</h4>
              <p class="text-[var(--color-text-offset)]">Within 24 hours</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-[var(--color-text)] mb-6">Our Expertise</h3>
        <ul class="space-y-3">
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Custom Web Development
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            E-commerce Solutions
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Progressive Web Apps
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            API Development & Integration
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Database Design & Optimization
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Performance & SEO Optimization
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Maintenance & Support
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Technical Consulting
          </li>
        </ul>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-[var(--color-text)] mb-6">Why Choose Us?</h3>
        <ul class="space-y-3">
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            15+ years of experience
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Modern tech stack
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Performance-focused
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            SEO optimized
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Mobile-first approach
          </li>
          <li class="flex items-center text-[var(--color-text-offset)] pl-4 relative">
            <span class="absolute left-0 w-2 h-2 bg-[var(--color-primary)] rounded-full"></span>
            Ongoing support
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
  import { registerScript } from '@components/Scripts/loader'
  import { ContactForm } from './client'

  // Register contact form script to initialize with Astro View Transitions
  registerScript(ContactForm)
</script>
