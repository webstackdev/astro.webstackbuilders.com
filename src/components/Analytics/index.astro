---
import VercelAnalytics from '@vercel/analytics/astro'
import { isDev, isProd } from '@components/scripts/utils/environmentClient'

const mode = isProd() ? 'production' : 'development'
---

<script>
  window.webAnalyticsBeforeSend = event => {
    /** Ignore testing pages in tracking */
    if (event?.url?.includes('/testing/')) {
      return null
    }
    return event
  }
</script>
<VercelAnalytics debug={isDev()} mode={mode} />
