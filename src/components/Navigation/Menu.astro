---
import { navigationItems } from '@components/Navigation/server'
import styles from './menu.module.css'
export interface Props {
  path: string
}

const { path } = Astro.props

const isActiveMenuItem = (url: string) => {
  return path === url
}

const activeMenuItem = (url: string) => {
  return isActiveMenuItem(url) ? ['nav-item-active', styles.navItemActive] : []
}
---

<nav id="main-nav" class="main-nav" role="navigation" aria-label="Main">
  <ul
    class:list={[
      'main-nav-menu',
      styles.mainNavMenu,
      'w-full font-heading text-[0.85rem] uppercase tracking-[0.22em] text-primary',
      'lg:relative lg:text-[0.8rem] lg:tracking-[0.12em]',
    ]}
    aria-label="main navigation"
    tabindex="-1"
  >
    {
      navigationItems.map((navItem, index) => {
        const isActive = isActiveMenuItem(navItem.url)
        const delaySeconds = 0.15 + index * 0.05
        return (
          <li
            class:list={[
              'main-nav-item',
              styles.mainNavItem,
              'lg:relative',
              ...activeMenuItem(navItem.url),
            ]}
            style={`--nav-item-delay: ${delaySeconds}s`}
          >
            <a
              href={navItem.url}
              aria-current={isActive ? 'page' : undefined}
              class:list={[
                'block text-primary text-xl font-bold tracking-[5px] uppercase no-underline text-center p-4 lg:text-lg lg:lowercase lg:tracking-normal lg:px-5 lg:py-3 lg:flex lg:items-center lg:relative lg:whitespace-nowrap lg:z-(--z-raised)',
                styles.mainNavLink,
              ]}
            >
              {navItem.title}
            </a>
          </li>
        )
      })
    }
  </ul>
</nav>
