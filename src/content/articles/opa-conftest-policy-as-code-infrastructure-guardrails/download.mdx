---
title: "Policy as Code: OPA Guardrails With Fast Feedback"
description: "Implementing infrastructure policies with OPA and Conftest that catch violations before they reach production."
author: "kevin-brown"
cover: "./cover.png"
coverAlt: "TODO"
publishDate: 2023-05-07
isDraft: false
fileType: "PDF"
fileSize: "1.7 MB"
pages: 35
fileName: "opa-conftest-policy-as-code-infrastructure-guardrails.pdf"
---

A developer opens a PR for a Terraform change, gets rejected 16 hours later for missing S3 encryption, fixes it, and waits another day for re-review. The cycle—write, wait, reject, fix, wait—drains velocity and breeds resentment toward security. Real shift-left means before the commit: policy checks during `git add` that catch violations in seconds while context is fresh. OPA (Open Policy Agent) and Conftest enable this—fast pre-commit hooks, parallelized CI checks, and feedback loops that make compliance a developer experience issue.

The key paradox: comprehensive policies with slow feedback get disabled. Start with five critical policies that run fast, get adoption, then expand.

This complete guide teaches you:

- OPA architecture: library mode, daemon mode, and CLI mode deployment
- Rego fundamentals: rules, conditions, iteration, and data querying
- Conftest integration: parsing Terraform, Kubernetes YAML, and Dockerfiles
- Pre-commit hooks: fast feedback in seconds, before commits
- CI enforcement: parallelized policy evaluation across infrastructure files
- Policy writing: building practical rules for cloud compliance
- Common guardrails: encryption, public access, resource limits, privileged containers
- Debugging violations: understanding why policies fail and fixing them
- Multi-environment policies: development, staging, and production rules

Download Your OPA Policy as Code Guide now to shift security left and catch violations before production.
