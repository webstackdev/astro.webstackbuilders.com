---
/**
 * Page layout used for item view pages for primary collections like articles,
 * case studies, and services, and also dynamic token newsletter confirm pages.
 */
import BaseLayout from '@layouts/BaseLayout.astro'
import SubHeader from '@components/Layout/SubHeader/index.astro'

export interface Props {
  /** Optional title override for the breadcrumbs UI */
  breadcrumbTitle?: string
  /** Optional page description, set to pageDescription if missing */
  description?: string
  /** Icon to use in the subheader */
  icon: string
  /** Whether search engines should ignore the page, default: false */
  noindex?: boolean
  /** Page description for meta tags */
  pageDescription: string
  /** Meta page title displayed in the browser tab and window title bar */
  pageTitle: string
  /** The URL path component e.g. 'articles/my-article' */
  path: string
  /** Specifies the main, high-level category or theme of the article */
  section?: string
  /** Optional page subtitle, set to pageTitle if missing */
  title?: string
  /** Optional page subtitle */
  subtitle?: string
}

const {
  breadcrumbTitle,
  description,
  icon,
  noindex,
  pageDescription,
  pageTitle,
  path,
  section,
  subtitle,
  title,
} = Astro.props

const baseLayoutProps = {
  pageTitle,
  pageDescription,
  path,
  ...(noindex !== undefined ? { noindex } : {}),
  ...(breadcrumbTitle !== undefined ? { breadcrumbTitle } : {}),
  ...(section !== undefined ? { section } : {}),
}
---

<BaseLayout {...baseLayoutProps}>
  <SubHeader
    title={title ?? pageTitle}
    description={description ?? pageDescription}
    {...(subtitle ? { subtitle } : {})}
    icon={icon}
  />
  {/** Page content */}
  <slot />
</BaseLayout>
